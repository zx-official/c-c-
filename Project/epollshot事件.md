# epollshot事件
- 即使可以使用ET模式，一个socket上的某个事件还是可能被出发多次，这在并发程序中就会引起一个问题，比如一个线程在读取完某个socket上的数据后开始处理这些数据，而在数据的处理过程中该socket上又有新数据可读(EPOLLIN再次被触发)，此时另外一个线程被唤醒来读取这些新的数据。于是就出现了两个线程同时操作一个socket的局面，一个socket连接在任意时刻都只被一个线程处理，可以使用epoll的EPOLLONESHOT事件实现。
- 对于注册了epollshot事件的文件描述符，操作系统最多触发其上注册的一个可读，可写或者异常事件，且触发一次，除非使用epoll——ctl函数重置该文件描述符上注册的epollshot事件。这样，当一个线程在处理某个socket时，其他线程是不可能有机会操作该socket的，但反过来思考，注册了epollshot事件的socket一旦被某个线程处理完毕，该线程应该立即重置这个socket上的epollshot事件，以确保这个socket下一次可读时，其epollshot事件能被触发，进而让其他工作线程又几乎继续处理这个socket。